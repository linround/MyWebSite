"use strict";(self.webpackChunkmy_app_react=self.webpackChunkmy_app_react||[]).push([[936],{7936:function(e,n,r){r.r(n),r.d(n,{default:function(){return l}});var t=r(2791),a=r(7193),o=r(415);function i(e,n){var r=e.getContext("webgl");if(r){var t=(0,o.ST)(r,"\n        attribute vec2 a_position;\n        attribute vec2 a_texCoord;\n        \n        uniform vec2 u_resolution;\n        \n        varying vec2 v_texCoord;\n        \n        void main() {\n           // \u50cf\u7d20\u7a7a\u95f4\u8f6c\u6362\u5230\u88c1\u526a\u7a7a\u95f4\uff08-1\uff0c1\uff09\n           vec2 zeroToOne = a_position / u_resolution;\n        \n           // \u8f6c\u6362 0->1 to 0->2\n           vec2 zeroToTwo = zeroToOne * 2.0;\n        \n           // \u8f6c\u6362 0->2 to -1->+1 (\u88c1\u526a\u7a7a\u95f4\u5750\u6807)\n           vec2 clipSpace = zeroToTwo - 1.0;\n           // \u5c06y\u8f74\u53cd\u8f6c\n           gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n        \n           // \u4f20\u5165\u7eb9\u7406\u5750\u6807\n           v_texCoord = a_texCoord;\n        }\n  ","\n      precision mediump float;\n      \n      // \u7eb9\u7406\u4fe1\u606f\n      // 2d\u91c7\u6837\u5668\n      // \u4f7f\u7528\u8fd9\u4e2a\u91c7\u6837\u5668\u5bf9\u7eb9\u7406\u5750\u6807\u70b9\u8fdb\u884c\u91c7\u6837\n      uniform sampler2D u_image;\n      // \u7eb9\u7406\u5927\u5c0f\n      uniform vec2 u_textureSize;\n      // \u5377\u79ef\u6838\n      uniform float u_kernel[9];\n      // \u6838\u6743\u91cd\n      uniform float u_kernelWeight;\n      \n      // \u9876\u70b9\u7740\u8272\u5668\u4f20\u5165\u7684\u7eb9\u7406\u5750\u6807.\n      varying vec2 v_texCoord;\n      \n      void main() {\n         // 1px \u50cf\u7d20\n         // \u56fe\u50cf\u5904\u7406\u9700\u8981\u5176\u4ed6\u50cf\u7d20\u7684\u989c\u8272\u503c\u600e\u4e48\u529e\uff1f\n         // \u7531\u4e8eWebGL\u7684\u7eb9\u7406\u5750\u6807\u8303\u56f4\u662f 0.0 \u5230 1.0 \uff0c \u90a3\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u8ba1\u7b97\u51fa\u79fb\u52a8\u4e00\u4e2a\u50cf\u7d20\u5bf9\u5e94\u7684\u8ddd\u79bb\n         \n         vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n         \n         \n         // \u4ee5\u4e0b\n         // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4ee3\u8868\u56fe\u7247\u7eb9\u7406\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7eb9\u7406\u5750\u6807\u70b9\uff0c\u901a\u8fc7GLSL\u7684\u5185\u5efa\u51fd\u6570texture2D\u6765\u83b7\u53d6\u5bf9\u5e94\u4f4d\u7f6e\u7eb9\u7406\u7684\u989c\u8272RGBA\u503c\n         // texture2D\u51fd\u6570\u521b\u5efatexture2D\u8d34\u56fe\uff0c\u5e76\u5bf9\u50cf\u7d20\u8fdb\u884c\u64cd\u4f5c\n         // \u53d6\u5f97\u5f53\u524d\u7eb9\u7406\u5750\u6807\u5468\u56f4\u5750\u6807\u7684\u50cf\u7d20\u503c\uff0c\u7136\u540e\u505a\u5377\u79ef\u8fd0\u7b97\n         // \u6700\u7ec8\u5f97\u5230\u4e00\u4e2a\u50cf\u7d20\u503c\uff0c\u8fd9\u4e2a\u50cf\u7d20\u503c\u5c31\u662f\u5f53\u524d\u7247\u6bb5\u7740\u8272\u5668\u5668\u7684\u989c\u8272\u503c\n         \n         \n         \n         // vec4 texture2D(sampler2D sampler, vec2 coord)\n         // vec4 texture2D(sampler2D sampler, vec2 coord, float bias)\n         // \u56e0\u4e3atexImage2D\u6307\u5b9a\u4e86\u88ab\u7ed1\u5b9a\u7684\u7eb9\u7406\u56fe\u50cf\n         // \u53c2\u65701\u662f\u4e00\u4e2a\u91c7\u6837\u5668\uff0c\u8fd9\u4e2a\u91c7\u6837\u5668\uff08u_image\uff09\u4f1a\u88ab\u7ed1\u5b9a\u5230\u5f53\u524d\u7684\u7eb9\u7406\u56fe\u50cf\n         // \u53c2\u65701\uff1a sampler\u6307\u5b9a\u5c06\u4ece\u4e2d\u68c0\u7d22\u7eb9\u7d20\u7684\u7eb9\u7406\u7ed1\u5b9a\u5230\u7684\u91c7\u6837\u5668 \u3002\n         // \u53c2\u65702\uff1a coord\u6307\u5b9a\u7eb9\u7406\u5c06\u88ab\u91c7\u6837\u7684\u7eb9\u7406\u5750\u6807\u3002\n         // \u53c2\u65703\uff1a bias\u6307\u5b9a\u5728\u8be6\u7ec6\u7ea7\u522b\u8ba1\u7b97\u671f\u95f4\u8981\u5e94\u7528\u7684\u53ef\u9009\u504f\u5dee\n         // texture2D \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u7eb9\u7d20\uff0c\u5373\u7ed9\u5b9a\u5750\u6807\u7684\u7eb9\u7406\uff08\u989c\u8272\uff09\u503c\n         vec4 colorSum =\n             texture2D(u_image, v_texCoord + onePixel * vec2(-1, -1)) * u_kernel[0] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 0, -1)) * u_kernel[1] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 1, -1)) * u_kernel[2] +\n             texture2D(u_image, v_texCoord + onePixel * vec2(-1,  0)) * u_kernel[3] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 0,  0)) * u_kernel[4] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 1,  0)) * u_kernel[5] +\n             texture2D(u_image, v_texCoord + onePixel * vec2(-1,  1)) * u_kernel[6] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 0,  1)) * u_kernel[7] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 1,  1)) * u_kernel[8] ;\n      \n         gl_FragColor = vec4((colorSum / u_kernelWeight).rgb, 1);\n      }\n  "),a=r.getAttribLocation(t,"a_position"),i=r.getAttribLocation(t,"a_texCoord"),u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),function(e,n,r,t,a){var o=n,i=n+t,u=r,c=r+a;e.bufferData(e.ARRAY_BUFFER,new Float32Array([o,c,o,u,i,u,o,c,i,u,i,c]),e.STATIC_DRAW)}(r,0,0,n.width,n.height);var c=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW);var l=r.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n);var s=r.getUniformLocation(t,"u_resolution"),_=r.getUniformLocation(t,"u_textureSize"),v=r.getUniformLocation(t,"u_kernel[0]"),d=r.getUniformLocation(t,"u_kernelWeight"),m="edgeDetect2",f=document.querySelector("#ui"),g=document.createElement("select");for(var x in o.lw){var T=document.createElement("option");T.value=x,x===m&&(T.selected=!0),T.appendChild(document.createTextNode(x)),g.appendChild(T)}g.onchange=function(){h(this.options[this.selectedIndex].value)},f.appendChild(g),h(m)}function h(e){r.viewport(0,0,r.canvas.width,r.canvas.height),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.useProgram(t),r.enableVertexAttribArray(a),r.bindBuffer(r.ARRAY_BUFFER,u);var l=2,m=r.FLOAT,f=!1,g=0,x=0;r.vertexAttribPointer(a,l,m,f,g,x),r.enableVertexAttribArray(i),r.bindBuffer(r.ARRAY_BUFFER,c),l=2,m=r.FLOAT,f=!1,g=0,x=0,r.vertexAttribPointer(i,l,m,f,g,x),r.uniform2f(s,r.canvas.width,r.canvas.height),r.uniform2f(_,n.width,n.height),r.uniform1fv(v,o.lw[e]),r.uniform1f(d,function(e){var n=e.reduce((function(e,n){return e+n}));return n<=0?1:n}(o.lw[e]));var T=r.TRIANGLES;x=0;r.drawArrays(T,x,6)}}var u=r(5873),c=r(184);function l(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null);return(0,c.jsxs)("div",{children:[(0,c.jsx)("canvas",{className:a.Z.canvasContainer,ref:e,width:400,height:300}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{id:"ui"}),(0,c.jsx)("div",{className:a.Z.canvasButton,onClick:function(){i(e.current,n.current)},children:"\u7ed8\u5236\u56fe\u5f62"}),(0,c.jsx)("img",{src:u,ref:n})]})]})}},415:function(e,n,r){function t(e,n,r){var t=e.createShader(n);if(e.shaderSource(t,r),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS))return t;console.log("getShaderInfoLog",e.getShaderInfoLog(t)),e.deleteShader(t)}function a(e,n,r){var t=e.createProgram();if(e.attachShader(t,n),e.attachShader(t,r),e.linkProgram(t),e.getProgramParameter(t,e.LINK_STATUS))return t;console.log(e.getProgramInfoLog(t)),e.deleteProgram(t)}function o(e,n,r){return a(e,t(e,e.VERTEX_SHADER,n),t(e,e.FRAGMENT_SHADER,r))}r.d(n,{ef:function(){return t},HO:function(){return a},ST:function(){return o},lw:function(){return i},Sz:function(){return u}});var i={normal:[0,0,0,0,1,0,0,0,0],gaussianBlur:[.045,.122,.045,.122,.332,.122,.045,.122,.045],gaussianBlur2:[1,2,1,2,4,2,1,2,1],gaussianBlur3:[0,1,0,1,1,1,0,1,0],unsharpen:[-1,-1,-1,-1,9,-1,-1,-1,-1],sharpness:[0,-1,0,-1,5,-1,0,-1,0],sharpen:[-1,-1,-1,-1,16,-1,-1,-1,-1],edgeDetect:[-.125,-.125,-.125,-.125,1,-.125,-.125,-.125,-.125],edgeDetect2:[-1,-1,-1,-1,8,-1,-1,-1,-1],edgeDetect3:[-5,0,0,0,0,0,0,0,5],edgeDetect4:[-1,-1,-1,0,0,0,1,1,1],edgeDetect5:[-1,-1,-1,2,2,2,-1,-1,-1],edgeDetect6:[-5,-5,-5,-5,39,-5,-5,-5,-5],sobelHorizontal:[1,2,1,0,0,0,-1,-2,-1],sobelVertical:[1,0,-1,2,0,-2,1,0,-1],previtHorizontal:[1,1,1,0,0,0,-1,-1,-1],previtVertical:[1,0,-1,1,0,-1,1,0,-1],boxBlur:[.111,.111,.111,.111,.111,.111,.111,.111,.111],triangleBlur:[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],emboss:[-2,-1,0,-1,1,1,0,1,2]},u=[{name:"gaussianBlur3",on:!0},{name:"gaussianBlur3",on:!0},{name:"gaussianBlur3",on:!0},{name:"sharpness"},{name:"sharpness"},{name:"sharpness"},{name:"sharpen"},{name:"sharpen"},{name:"sharpen"},{name:"unsharpen"},{name:"unsharpen"},{name:"unsharpen"},{name:"emboss",on:!0},{name:"edgeDetect"},{name:"edgeDetect"},{name:"edgeDetect3"},{name:"edgeDetect3"}]},7193:function(e,n){n.Z={canvasContainer:"canvasContainer_AroEJ",canvasUi:"canvasUi_B_Bta",canvasButton:"canvasButton_l2P0H"}},5873:function(e,n,r){e.exports=r.p+"static/media/leaves.e202cb896876965505d9.jpg"}}]);
//# sourceMappingURL=936.84691772.chunk.js.map