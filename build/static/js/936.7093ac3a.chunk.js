"use strict";(self.webpackChunkmy_app_react=self.webpackChunkmy_app_react||[]).push([[936],{7936:function(e,n,t){t.r(n),t.d(n,{default:function(){return l}});var r=t(2791),o=t(7193),a=t(415);function i(e,n){var t=e.getContext("webgl");if(t){var r=(0,a.ST)(t,"\n        attribute vec2 a_position;\n        attribute vec2 a_texCoord;\n        \n        uniform vec2 u_resolution;\n        \n        varying vec2 v_texCoord;\n        \n        void main() {\n           // \u50cf\u7d20\u7a7a\u95f4\u8f6c\u6362\u5230\u88c1\u526a\u7a7a\u95f4\uff08-1\uff0c1\uff09\n           vec2 zeroToOne = a_position / u_resolution;\n        \n           // \u8f6c\u6362 0->1 to 0->2\n           vec2 zeroToTwo = zeroToOne * 2.0;\n        \n           // \u8f6c\u6362 0->2 to -1->+1 (\u88c1\u526a\u7a7a\u95f4\u5750\u6807)\n           vec2 clipSpace = zeroToTwo - 1.0;\n           // \u5c06y\u8f74\u53cd\u8f6c\n           gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n        \n           // \u4f20\u5165\u7eb9\u7406\u5750\u6807\n           v_texCoord = a_texCoord;\n        }\n  ","\n      precision mediump float;\n      \n      // \u7eb9\u7406\u4fe1\u606f\n      // 2d\u50cf\u7d20\u4fe1\u606f\n      uniform sampler2D u_image;\n      // \u7eb9\u7406\u5927\u5c0f\n      uniform vec2 u_textureSize;\n      // \u5377\u79ef\u6838\n      uniform float u_kernel[9];\n      // \u6838\u6743\u91cd\n      uniform float u_kernelWeight;\n      \n      // \u9876\u70b9\u7740\u8272\u5668\u4f20\u5165\u7684\u7eb9\u7406\u5750\u6807.\n      varying vec2 v_texCoord;\n      \n      void main() {\n         // 1px \u50cf\u7d20\n         // \u56fe\u50cf\u5904\u7406\u9700\u8981\u5176\u4ed6\u50cf\u7d20\u7684\u989c\u8272\u503c\u600e\u4e48\u529e\uff1f\n         // \u7531\u4e8eWebGL\u7684\u7eb9\u7406\u5750\u6807\u8303\u56f4\u662f 0.0 \u5230 1.0 \uff0c \u90a3\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u8ba1\u7b97\u51fa\u79fb\u52a8\u4e00\u4e2a\u50cf\u7d20\u5bf9\u5e94\u7684\u8ddd\u79bb\n         \n         vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n         \n         \n         // \u4ee5\u4e0b\n         // \u7b2c\u4e00\u4e2a\u53c2\u6570\u4ee3\u8868\u56fe\u7247\u7eb9\u7406\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7eb9\u7406\u5750\u6807\u70b9\uff0c\u901a\u8fc7GLSL\u7684\u5185\u5efa\u51fd\u6570texture2D\u6765\u83b7\u53d6\u5bf9\u5e94\u4f4d\u7f6e\u7eb9\u7406\u7684\u989c\u8272RGBA\u503c\n         // texture2D\u51fd\u6570\u521b\u5efatexture2D\u8d34\u56fe\uff0c\u5e76\u5bf9\u50cf\u7d20\u8fdb\u884c\u64cd\u4f5c\n         // \u53d6\u5f97\u5f53\u524d\u7eb9\u7406\u5750\u6807\u5468\u56f4\u5750\u6807\u7684\u50cf\u7d20\u503c\uff0c\u7136\u540e\u505a\u5377\u79ef\u8fd0\u7b97\n         // \u6700\u7ec8\u5f97\u5230\u4e00\u4e2a\u50cf\u7d20\u503c\uff0c\u8fd9\u4e2a\u50cf\u7d20\u503c\u5c31\u662f\u5f53\u524d\u7247\u6bb5\u7740\u8272\u5668\u5668\u7684\u989c\u8272\u503c\n         vec4 colorSum =\n             texture2D(u_image, v_texCoord + onePixel * vec2(-1, -1)) * u_kernel[0] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 0, -1)) * u_kernel[1] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 1, -1)) * u_kernel[2] +\n             texture2D(u_image, v_texCoord + onePixel * vec2(-1,  0)) * u_kernel[3] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 0,  0)) * u_kernel[4] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 1,  0)) * u_kernel[5] +\n             texture2D(u_image, v_texCoord + onePixel * vec2(-1,  1)) * u_kernel[6] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 0,  1)) * u_kernel[7] +\n             texture2D(u_image, v_texCoord + onePixel * vec2( 1,  1)) * u_kernel[8] ;\n      \n         gl_FragColor = vec4((colorSum / u_kernelWeight).rgb, 1);\n      }\n  "),o=t.getAttribLocation(r,"a_position"),i=t.getAttribLocation(r,"a_texCoord"),u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),function(e,n,t,r,o){var a=n,i=n+r,u=t,c=t+o;e.bufferData(e.ARRAY_BUFFER,new Float32Array([a,u,i,u,a,c,a,c,i,u,i,c]),e.STATIC_DRAW)}(t,0,0,n.width,n.height);var c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),t.STATIC_DRAW);var l=t.createTexture();t.bindTexture(t.TEXTURE_2D,l),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);var _=t.getUniformLocation(r,"u_resolution"),v=t.getUniformLocation(r,"u_textureSize"),d=t.getUniformLocation(r,"u_kernel[0]"),f=t.getUniformLocation(r,"u_kernelWeight"),s={normal:[0,0,0,0,1,0,0,0,0],gaussianBlur:[.045,.122,.045,.122,.332,.122,.045,.122,.045],gaussianBlur2:[1,2,1,2,4,2,1,2,1],gaussianBlur3:[0,1,0,1,1,1,0,1,0],unsharpen:[-1,-1,-1,-1,9,-1,-1,-1,-1],sharpness:[0,-1,0,-1,5,-1,0,-1,0],sharpen:[-1,-1,-1,-1,16,-1,-1,-1,-1],edgeDetect:[-.125,-.125,-.125,-.125,1,-.125,-.125,-.125,-.125],edgeDetect2:[-1,-1,-1,-1,8,-1,-1,-1,-1],edgeDetect3:[-5,0,0,0,0,0,0,0,5],edgeDetect4:[-1,-1,-1,0,0,0,1,1,1],edgeDetect5:[-1,-1,-1,2,2,2,-1,-1,-1],edgeDetect6:[-5,-5,-5,-5,39,-5,-5,-5,-5],sobelHorizontal:[1,2,1,0,0,0,-1,-2,-1],sobelVertical:[1,0,-1,2,0,-2,1,0,-1],previtHorizontal:[1,1,1,0,0,0,-1,-1,-1],previtVertical:[1,0,-1,1,0,-1,1,0,-1],boxBlur:[.111,.111,.111,.111,.111,.111,.111,.111,.111],triangleBlur:[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625],emboss:[-2,-1,0,-1,1,1,0,1,2]},g="edgeDetect2",x=document.querySelector("#ui"),m=document.createElement("select");for(var T in s){var E=document.createElement("option");E.value=T,T===g&&(E.selected=!0),E.appendChild(document.createTextNode(T)),m.appendChild(E)}m.onchange=function(){R(this.options[this.selectedIndex].value)},x.appendChild(m),R(g)}function R(e){t.viewport(100,-100,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(r),t.enableVertexAttribArray(o),t.bindBuffer(t.ARRAY_BUFFER,u);var a=2,l=t.FLOAT,g=!1,x=0,m=0;t.vertexAttribPointer(o,a,l,g,x,m),t.enableVertexAttribArray(i),t.bindBuffer(t.ARRAY_BUFFER,c),a=2,l=t.FLOAT,g=!1,x=0,m=0,t.vertexAttribPointer(i,a,l,g,x,m),t.uniform2f(_,t.canvas.width,t.canvas.height),t.uniform2f(v,n.width,n.height),t.uniform1fv(d,s[e]),t.uniform1f(f,function(e){var n=e.reduce((function(e,n){return e+n}));return n<=0?1:n}(s[e]));var T=t.TRIANGLES;m=0;t.drawArrays(T,m,6)}}var u=t(5873),c=t(184);function l(){var e=(0,r.useRef)(null),n=(0,r.useRef)(null);return(0,c.jsxs)("div",{children:[(0,c.jsx)("canvas",{className:o.Z.canvasContainer,ref:e,width:400,height:300}),(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{id:"ui"}),(0,c.jsx)("div",{className:o.Z.canvasButton,onClick:function(){i(e.current,n.current)},children:"\u7ed8\u5236\u56fe\u5f62"}),(0,c.jsx)("img",{src:u,ref:n})]})]})}},415:function(e,n,t){function r(e,n,t){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.log("getShaderInfoLog",e.getShaderInfoLog(r)),e.deleteShader(r)}function o(e,n,t){var r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,t),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.log(e.getProgramInfoLog(r)),e.deleteProgram(r)}function a(e,n,t){return o(e,r(e,e.VERTEX_SHADER,n),r(e,e.FRAGMENT_SHADER,t))}t.d(n,{ef:function(){return r},HO:function(){return o},ST:function(){return a}})},7193:function(e,n){n.Z={canvasContainer:"canvasContainer_AroEJ",canvasButton:"canvasButton_l2P0H"}},5873:function(e,n,t){e.exports=t.p+"static/media/leaves.e202cb896876965505d9.jpg"}}]);
//# sourceMappingURL=936.7093ac3a.chunk.js.map