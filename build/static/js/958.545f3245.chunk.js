(self.webpackChunkmy_app_react=self.webpackChunkmy_app_react||[]).push([[958],{2958:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var e=r(885),a=r(2791),o=r(7193),i=r(415),c=r(3401);function u(n){var t=n.getContext("webgl");if(t){var r=(0,i.ST)(t,"\n    // \u5b9a\u4e49\u9876\u70b9\u4e8c\u7ef4\u5411\u91cf\n    attribute vec2 a_position;\n    // \u989c\u8272\u5c5e\u6027 \u56db\u7ef4\u5411\u91cf rgba\n    attribute vec4 a_color;\n    // \u5168\u5c40\u53d8\u91cf\u77e9\u9635 3*3\u7684\u65b9\u9635\n    uniform mat3 u_matrix;\n    // \u53ef\u53d8\u91cf\u989c\u8272 \u56db\u7ef4\u5411\u91cf\n    varying vec4 to_f_color;\n    \n    void main() {\n      //\n      // \u4f4d\u7f6e\u4e58\u4ee5\u77e9\u9635\uff08\u8be5\u77e9\u9635\u662f\u4e00\u4e2a\u7f29\u653e\uff0c\u65cb\u8f6c\uff0c\u5e73\u79fb\u7684\u56e0\u5b50\uff09\n      gl_Position = vec4((u_matrix * vec3(a_position, 1)).x,(u_matrix * vec3(a_position, 1)).y,   0,    1);\n    \n      // Copy the color from the attribute to the varying.\n      to_f_color = a_color;\n    }\n  ","\n    precision mediump float;\n    varying vec4 to_f_color;\n    \n    \n    void main() {\n      gl_FragColor = to_f_color;\n    }\n  "),e=t.getAttribLocation(r,"a_position"),a=t.getAttribLocation(r,"a_color"),o=t.getUniformLocation(r,"u_matrix"),u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),function(n){n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,0,200,200,0,0,200,200,0,200,200]),n.STATIC_DRAW)}(t);var f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),function(n){var t=256*Math.random(),r=256*Math.random(),e=256*Math.random(),a=256*Math.random(),o=256*Math.random(),i=256*Math.random();n.bufferData(n.ARRAY_BUFFER,new Uint8Array([t,r,e,255,t,r,e,255,t,r,e,255,a,o,i,255,a,o,i,255,a,o,i,255]),n.STATIC_DRAW)}(t);var s=[0,0],l=0,v=[1,1];return d(),{updateAngle:function(n,t){var r=360-t.value;l=r*Math.PI/180,d()},updatePosition:function(n,t){s=t.value,d()},updateScale:function(n,t){v=t.value,d()}}}function d(){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(r),t.enableVertexAttribArray(e),t.bindBuffer(t.ARRAY_BUFFER,u);var n=2,i=t.FLOAT,d=!1,h=0,_=0;t.vertexAttribPointer(e,n,i,d,h,_),t.enableVertexAttribArray(a),t.bindBuffer(t.ARRAY_BUFFER,f),n=4,i=t.UNSIGNED_BYTE,d=!0,h=0,_=0,t.vertexAttribPointer(a,n,i,d,h,_);var m=c.projection(t.canvas.clientWidth,t.canvas.clientHeight);console.log(m),m=c.translate(m,s[0],s[1]),m=c.rotate(m,l),m=c.scale(m,v[0],v[1]),t.uniformMatrix3fv(o,!1,m);var A=t.TRIANGLES;_=0;t.drawArrays(A,_,6)}}var f=r(184);function s(){var n=(0,a.useRef)(null),t=(0,a.useState)({}),r=(0,e.Z)(t,2),i=r[0],c=r[1],s=i.updateAngle,l=i.updatePosition,v=i.updateScale;return(0,f.jsxs)("div",{children:[(0,f.jsx)("canvas",{className:o.Z.canvasContainer,ref:n,width:400,height:300}),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:o.Z.canvasButton,onClick:function(){var t=u(n.current);c(t)},children:"\u7ed8\u5236\u4e09\u89d2\u5f62"}),(0,f.jsx)("div",{className:o.Z.canvasButton,onClick:function(n){s&&s(n,{value:45})},children:"\u65cb\u8f6c\u89d2\u5ea6"}),(0,f.jsx)("div",{className:o.Z.canvasButton,onClick:function(n){l&&l(n,{value:[100,100]})},children:"\u8fdb\u884c\u4f4d\u79fb"}),(0,f.jsx)("div",{className:o.Z.canvasButton,onClick:function(n){v&&v(n,{value:[2,.5]})},children:"\u8fdb\u884c\u7f29\u653e"})]})]})}},415:function(n,t,r){"use strict";function e(n,t,r){var e=n.createShader(t);if(n.shaderSource(e,r),n.compileShader(e),n.getShaderParameter(e,n.COMPILE_STATUS))return e;console.log("getShaderInfoLog",n.getShaderInfoLog(e)),n.deleteShader(e)}function a(n,t,r){var e=n.createProgram();if(n.attachShader(e,t),n.attachShader(e,r),n.linkProgram(e),n.getProgramParameter(e,n.LINK_STATUS))return e;console.log(n.getProgramInfoLog(e)),n.deleteProgram(e)}function o(n,t,r){return a(n,e(n,n.VERTEX_SHADER,t),e(n,n.FRAGMENT_SHADER,r))}r.d(t,{ef:function(){return e},HO:function(){return a},ST:function(){return o}})},3401:function(n,t){var r,e,a;e=[],void 0===(a="function"===typeof(r=function(){"use strict";var n=Float32Array;function t(t,r,e){e=e||new n(9);var a=t[0],o=t[1],i=t[2],c=t[3],u=t[4],f=t[5],s=t[6],l=t[7],v=t[8],d=r[0],h=r[1],_=r[2],m=r[3],A=r[4],g=r[5],p=r[6],R=r[7],S=r[8];return e[0]=d*a+h*c+_*s,e[1]=d*o+h*u+_*l,e[2]=d*i+h*f+_*v,e[3]=m*a+A*c+g*s,e[4]=m*o+A*u+g*l,e[5]=m*i+A*f+g*v,e[6]=p*a+R*c+S*s,e[7]=p*o+R*u+S*l,e[8]=p*i+R*f+S*v,e}function r(t){return(t=t||new n(9))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function e(t,r,e){return(e=e||new n(9))[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function a(n,r,a,o){return t(n,e(r,a),o)}function o(t,r,e){return(e=e||new n(9))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t,e[7]=r,e[8]=1,e}function i(n,r,e,a){return t(n,o(r,e),a)}function c(t,r){var e=Math.cos(t),a=Math.sin(t);return(r=r||new n(9))[0]=e,r[1]=-a,r[2]=0,r[3]=a,r[4]=e,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function u(n,r,e){return t(n,c(r),e)}function f(t,r,e){return(e=e||new n(9))[0]=t,e[1]=0,e[2]=0,e[3]=0,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(n,r,e,a){return t(n,f(r,e),a)}function l(n,t,r,e){return n*r+t*e}function v(n,t,r,e){var a=n-r,o=t-e;return Math.sqrt(a*a+o*o)}function d(n,t){var r=v(0,0,n,t);return r>1e-5?[n/r,t/r]:[0,0]}function h(n,t,r,e){var a=l(r,e,n,t);return[n-2*a*r,t-2*a*e]}function _(n){return 180*n/Math.PI}function m(n){return n*Math.PI/180}function A(n,t){var r=t[0],e=t[1],a=r*n[2]+e*n[5]+n[8];return[(r*n[0]+e*n[3]+n[6])/a,(r*n[1]+e*n[4]+n[7])/a]}function g(t,r){r=r||new n(9);var e=t[0],a=t[1],o=t[2],i=t[3],c=t[4],u=t[5],f=t[6],s=t[7],l=t[8],v=l*c-u*s,d=-l*i+u*f,h=s*i-c*f,_=1/(e*v+a*d+o*h);return r[0]=v*_,r[1]=(-l*a+o*s)*_,r[2]=(u*a-o*c)*_,r[3]=d*_,r[4]=(l*e-o*f)*_,r[5]=(-u*e+o*i)*_,r[6]=h*_,r[7]=(-s*e+a*f)*_,r[8]=(c*e-a*i)*_,r}return{degToRad:m,distance:v,dot:l,identity:r,inverse:g,multiply:t,normalize:d,projection:e,radToDeg:_,reflect:h,rotation:c,rotate:u,scaling:f,scale:s,transformPoint:A,translation:o,translate:i,project:a}})?r.apply(t,e):r)||(n.exports=a)},7193:function(n,t){"use strict";t.Z={canvasContainer:"canvasContainer_AroEJ",canvasButton:"canvasButton_l2P0H"}}}]);
//# sourceMappingURL=958.545f3245.chunk.js.map